   <!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Login</title>
<script src="../js/header.js"></script>
<script src="../js/util.js"></script>
<script src="../js/bootstrap-datetimepicker.min.js"></script>
<link rel="stylesheet" type="text/css"  href="../css/bootstrap-datetimepicker.min.css"/>
<title>NurseHub</title>

<script>



function getOtherUser(){
	var id = getUrlParam("id");
	if(id==null || id==""){
		return null;
	}
	editState = "update";
	
	var user = sendJson("/admin/getOtherUserById",id);
	return user;
}

function init(){
	user = getOtherUser();
	if(user!=null && user!=""){
		$('#name').val(user.name);
		$('#workLevel').val("N" + (user.workLevel-1));
		if(user.isManager == true){
			$('#manager').prop("checked",true);
		}
	}
}

function confirm(){
	var form = $('form').jsonify();
	if($('#manager').prop("checked") == true){
		form.isManager = "true";
	}else{
		form.isManager = "false";
	}
	if(form.workLevel == "" || form.name== ""){
		alert("please fill the black!");
		return;
	}
	if(form.workLevel=="N0"){form.workLevel=1;}
	if(form.workLevel=="N1"){form.workLevel=2;}
	if(form.workLevel=="N2"){form.workLevel=3;}
	if(form.workLevel=="N3"){form.workLevel=4;}
	if(form.workLevel=="N4"){form.workLevel=5;}
	
	var url = "/admin/confirmOtherUser?id=";
	
	var id = getUrlParam("id");
	if(id==null || id==""){
		url = url + "-1";
	}else{
		url = url + id;
	}
	
	var res = sendJson(url,form);
	if(res.state == "ok"){
		alert("success");
		window.location.href="/admin/staff.html";
	}else{
		alert("save fail");
	}
}

function cancel(){
	window.location.href = "staff.html";
}
</script>
</head>

<body>
<div class="panel panel-default" style="margin-left:25%;margin-right:25%;margin-top:20px;">
    <div class="panel-heading">
        <h3 class="panel-title">
            User Info
        </h3>
    </div>
    <div class="panel-body">
    <form method="post">
	  	<div style="margin:10px;" class="input-group">
	  		<span class="input-group-addon">Name</span>
	  		<input id="name" type="text" name="name" class="form-control"/>
		</div>
		<div style="margin:10px;" class="input-group">
			<span class="input-group-addon">WorkLevel</span>
	  		<select style="min-width:80px" class="form-control" id="workLevel" name="workLevel">
		      <option>N0</option>
		      <option>N1</option>
		      <option>N2</option>
		      <option>N3</option>
		      <option>N4</option>
		    </select>
	  		<span class="input-group-addon"><input id="manager" type="checkbox" name="isManager"/></span>
	  		<input type="text" readonly="readonly" class="form-control" value="Manager"/>
		</div>
	
		<!-- button -->
		<div style="text-align:center;">
			<input type="button" value="Confirm" class="btn btn-success" onclick="confirm()">
			<input style="margin:20px;" type="button" value="Cancel" class="btn btn-danger" onclick="cancel()">
		</div>
	</form>
    </div>
</div>

<script>
init();
</script>
                
</body>
</html>