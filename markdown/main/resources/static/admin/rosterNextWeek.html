<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="../js/header.js"></script>
<script src="../js/util.js"></script>
<script src="../js/bootstrap-rating.min.js"></script>
<link href="../css/bootstrap-rating.css" rel="stylesheet">
<title>NurseHub</title>
<script>
var color = ['','btn-primary','btn-success','btn-info','btn-warning','btn-danger'];
var modalBtn = "";
var which = "recomend";
var gMinTimeLimit=0;
var gMaxTimeLimit=1000;
function loadTimeLimit(){
	var res = getJson("/admin/loadTimeLimit");
	gMinTimeLimit = res.minTime;
	gMaxTimeLimit = res.maxTime;
}

function recommend(){
	$("#recommend").show();
	$("#shiftPrefMin").hide();
	$("#shiftPrefAvg").hide();
	$("#workTimeLong").hide();
	$("#workTimeShort").hide();
	$("#workdayPrefMin").hide();
	$("#workdayPrefAvg").hide();
	which = "recommend";
}
function shiftPrefMin(){
	$("#recommend").hide();
	$("#shiftPrefMin").show();
	$("#shiftPrefAvg").hide();
	$("#workTimeLong").hide();
	$("#workTimeShort").hide();
	$("#workdayPrefMin").hide();
	$("#workdayPrefAvg").hide();
	which = "shiftPrefMin";
}
function shiftPrefAvg(){
	$("#recommend").hide();
	$("#shiftPrefMin").hide();
	$("#shiftPrefAvg").show();
	$("#workTimeLong").hide();
	$("#workTimeShort").hide();
	$("#workdayPrefMin").hide();
	$("#workdayPrefAvg").hide();
	which = "shiftPrefAvg";
}
function workTimeLong(){
	$("#recommend").hide();
	$("#shiftPrefMin").hide();
	$("#shiftPrefAvg").hide();
	$("#workTimeLong").show();
	$("#workTimeShort").hide();
	$("#workdayPrefMin").hide();
	$("#workdayPrefAvg").hide();
	which = "workTimeLong";
}
function workTimeShort(){
	$("#recommend").hide();
	$("#shiftPrefMin").hide();
	$("#shiftPrefAvg").hide();
	$("#workTimeLong").hide();
	$("#workTimeShort").show();
	$("#workdayPrefMin").hide();
	$("#workdayPrefAvg").hide();
	which = "shiftPrefAvg";
}
function workdayPrefMin(){
	$("#recommend").hide();
	$("#shiftPrefMin").hide();
	$("#shiftPrefAvg").hide();
	$("#workTimeLong").hide();
	$("#workTimeShort").hide();
	$("#workdayPrefMin").show();
	$("#workdayPrefAvg").hide();
	which = "workdayPrefMin";
}
function workdayPrefAvg(){
	$("#recommend").hide();
	$("#shiftPrefMin").hide();
	$("#shiftPrefAvg").hide();
	$("#workTimeLong").hide();
	$("#workTimeShort").hide();
	$("#workdayPrefMin").hide();
	$("#workdayPrefAvg").show();
	which = "workdayPrefAvg";
}


function generateRosters(){
	getJson("/admin/generateRosters");
}

function loadNewRosterReport(){
	var res= getJson("/admin/loadNewRosterReport");
	
	var recArr = new Array();
	var spmArr = new Array();
	var spaArr = new Array();
	var wtlArr = new Array();
	var wtsArr = new Array();
	var wpmArr = new Array();
	var wpaArr = new Array();
	
	var idx=0;
	for(i in res[0]){
		recArr[idx] = res[0][i];
		idx = idx+1;
	}
	idx = 0;
	for(i in res[1]){
		spmArr[idx] = res[1][i];
		idx = idx+1;
	}
	idx = 0;
	for(i in res[2]){
		spaArr[idx] = res[2][i];
		idx = idx+1;
	}
	idx = 0;
	for(i in res[3]){
		wtlArr[idx] = res[3][i];
		idx = idx+1;
	}
	idx = 0;
	for(i in res[4]){
		wtsArr[idx] = res[4][i];
		idx = idx+1;
	}
	idx = 0;
	for(i in res[5]){
		wpmArr[idx] = res[5][i];
		idx = idx+1;
	}
	idx = 0;
	for(i in res[6]){
		wpaArr[idx] = res[6][i];
		idx = idx+1;
	}
	
	if(recArr[0]==true){
		$(".recommend .timeLimitOk").text(" √");
		$(".recommend .timeLimitOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".recommend .timeLimitOk").text(" ×");
		$(".recommend .timeLimitOk").css({"color":"red","font-size":"150%"});
	}
	if(recArr[1]==true){
		$(".recommend .demandOk").text(" √");
		$(".recommend .demandOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".recommend .demandOk").text(" ×");
		$(".recommend .demandOk").css({"color":"red","font-size":"150%"});
	}
	
	if(spmArr[0]==true){
		$(".shiftPrefMin .timeLimitOk").text(" √");
		$(".shiftPrefMin .timeLimitOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".shiftPrefMin .timeLimitOk").text(" ×");
		$(".shiftPrefMin .timeLimitOk").css({"color":"red","font-size":"150%"});
	}
	if(spmArr[1]==true){
		$(".shiftPrefMin .demandOk").text(" √");
		$(".shiftPrefMin .demandOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".shiftPrefMin .demandOk").text(" ×");
		$(".shiftPrefMin .demandOk").css({"color":"red","font-size":"150%"});
	}
	
	if(spaArr[0]==true){
		$(".shiftPrefAvg .timeLimitOk").text(" √");
		$(".shiftPrefAvg .timeLimitOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".shiftPrefAvg .timeLimitOk").text(" ×");
		$(".shiftPrefAvg .timeLimitOk").css({"color":"red","font-size":"150%"});
	}
	if(spaArr[1]==true){
		$(".shiftPrefAvg .demandOk").text(" √");
		$(".shiftPrefAvg .demandOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".shiftPrefAvg .demandOk").text(" ×");
		$(".shiftPrefAvg .demandOk").css({"color":"red","font-size":"150%"});
	}
	
	if(wtlArr[0]==true){
		$(".workTimeLong .timeLimitOk").text(" √");
		$(".workTimeLong .timeLimitOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".workTimeLong .timeLimitOk").text(" ×");
		$(".workTimeLong .timeLimitOk").css({"color":"red","font-size":"150%"});
	}
	if(wtlArr[1]==true){
		$(".workTimeLong .demandOk").text(" √");
		$(".workTimeLong .demandOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".workTimeLong .demandOk").text(" ×");
		$(".workTimeLong .demandOk").css({"color":"red","font-size":"150%"});
	}
	
	if(wtsArr[0]==true){
		$(".workTimeShort .timeLimitOk").text(" √");
		$(".workTimeShort .timeLimitOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".workTimeShort .timeLimitOk").text(" ×");
		$(".workTimeShort .timeLimitOk").css({"color":"red","font-size":"150%"});
	}
	if(wtsArr[1]==true){
		$(".workTimeShort .demandOk").text(" √");
		$(".workTimeShort .demandOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".workTimeShort .demandOk").text(" ×");
		$(".workTimeShort .demandOk").css({"color":"red","font-size":"150%"});
	}
	
	if(wpmArr[0]==true){
		$(".workdayPrefMin .timeLimitOk").text(" √");
		$(".workdayPrefMin .timeLimitOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".workdayPrefMin .timeLimitOk").text(" ×");
		$(".workdayPrefMin .timeLimitOk").css({"color":"red","font-size":"150%"});
	}
	if(wpmArr[1]==true){
		$(".workdayPrefMin .demandOk").text(" √");
		$(".workdayPrefMin .demandOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".workdayPrefMin .demandOk").text(" ×");
		$(".workdayPrefMin .demandOk").css({"color":"red","font-size":"150%"});
	}
	
	if(wpaArr[0]==true){
		$(".workdayPrefAvg .timeLimitOk").text(" √");
		$(".workdayPrefAvg .timeLimitOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".workdayPrefAvg .timeLimitOk").text(" ×");
		$(".workdayPrefAvg .timeLimitOk").css({"color":"red","font-size":"150%"});
	}
	if(wpaArr[1]==true){
		$(".workdayPrefAvg .demandOk").text(" √");
		$(".workdayPrefAvg .demandOk").css({"color":"green","font-size":"150%"});
	}else{
		$(".workdayPrefAvg .demandOk").text(" ×");
		$(".workdayPrefAvg .demandOk").css({"color":"red","font-size":"150%"});
	}
	
	$(".recommend .compScore").val(recArr[2]);
	$(".shiftPrefMin .compScore").val(spmArr[2]);
	$(".shiftPrefAvg .compScore").val(spaArr[2]);
	$(".workTimeLong .compScore").val(wtlArr[2]);
	$(".workTimeShort .compScore").val(wtsArr[2]);
	$(".workdayPrefMin .compScore").val(spmArr[2]);
	$(".workdayPrefAvg .compScore").val(wpaArr[2]);
	
	
	for(i=0;i<3;i++){
		$(".recommend .prefTd").eq(i).val(recArr[i+3]);
		$(".shiftPrefMin .prefTd").eq(i).val(spmArr[i+3]);
		$(".shiftPrefAvg .prefTd").eq(i).val(spaArr[i+3]);
		$(".workTimeLong .prefTd").eq(i).val(wtlArr[i+3]);
		$(".workTimeShort .prefTd").eq(i).val(wtsArr[i+3]);
		$(".workdayPrefMin .prefTd").eq(i).val(wpmArr[i+3]);
		$(".workdayPrefAvg .prefTd").eq(i).val(wpaArr[i+3]);
	}
	var wtCon = "";
	for(i=6;i<9;i++){
		if(recArr[i] < gMinTimeLimit || recArr[i] > gMaxTimeLimit){
			wtCon = "<abbr style='color:red' title='the limit time is " + gMinTimeLimit + "-" 
				+ gMaxTimeLimit +"'>" + recArr[i] + "</abbr>";
		}else{
			wtCon = "<abbr title='the limit time is " + gMinTimeLimit + "-" 
			+ gMaxTimeLimit +"'>" + recArr[i] + "</abbr>";
		}
		$(".recommend .prefTd").eq(i).html(wtCon);
		//------
		if(spmArr[i] < gMinTimeLimit || spmArr[i] > gMaxTimeLimit){
			wtCon = "<abbr style='color:red' title='the limit time is " + gMinTimeLimit + "-" 
				+ gMaxTimeLimit +"'>" + spmArr[i] + "</abbr>";
		}else{
			wtCon = "<abbr title='the limit time is " + gMinTimeLimit + "-" 
			+ gMaxTimeLimit +"'>" + spmArr[i] + "</abbr>";
		}
		$(".shiftPrefMin .prefTd").eq(i).html(wtCon);
		//------
		if(spaArr[i] < gMinTimeLimit || spaArr[i] > gMaxTimeLimit){
			wtCon = "<abbr style='color:red' title='the limit time is " + gMinTimeLimit + "-" 
				+ gMaxTimeLimit +"'>" + spaArr[i] + "</abbr>";
		}else{
			wtCon = "<abbr title='the limit time is " + gMinTimeLimit + "-" 
			+ gMaxTimeLimit +"'>" + spaArr[i] + "</abbr>";
		}
		$(".shiftPrefAvg .prefTd").eq(i).html(wtCon);
		//------
		if(wtlArr[i] < gMinTimeLimit || wtlArr[i] > gMaxTimeLimit){
			wtCon = "<abbr style='color:red' title='the limit time is " + gMinTimeLimit + "-" 
				+ gMaxTimeLimit +"'>" + wtlArr[i] + "</abbr>";
		}else{
			wtCon = "<abbr title='the limit time is " + gMinTimeLimit + "-" 
			+ gMaxTimeLimit +"'>" + wtlArr[i] + "</abbr>";
		}
		$(".workTimeLong .prefTd").eq(i).html(wtCon);
		//------
		if(wtsArr[i] < gMinTimeLimit || wtsArr[i] > gMaxTimeLimit){
			wtCon = "<abbr style='color:red' title='the limit time is " + gMinTimeLimit + "-" 
				+ gMaxTimeLimit +"'>" + wtsArr[i] + "</abbr>";
		}else{
			wtCon = "<abbr title='the limit time is " + gMinTimeLimit + "-" 
			+ gMaxTimeLimit +"'>" + wtsArr[i] + "</abbr>";
		}
		$(".workTimeShort .prefTd").eq(i).html(wtCon);
		//------
		if(wpmArr[i] < gMinTimeLimit || wpmArr[i] > gMaxTimeLimit){
			wtCon = "<abbr style='color:red' title='the limit time is " + gMinTimeLimit + "-" 
				+ gMaxTimeLimit +"'>" + wpmArr[i] + "</abbr>";
		}else{
			wtCon = "<abbr title='the limit time is " + gMinTimeLimit + "-" 
			+ gMaxTimeLimit +"'>" + wpmArr[i] + "</abbr>";
		}
		$(".workdayPrefMin .prefTd").eq(i).html(wtCon);
		//------
		if(wpaArr[i] < gMinTimeLimit || wpaArr[i] > gMaxTimeLimit){
			wtCon = "<abbr style='color:red' title='the limit time is " + gMinTimeLimit + "-" 
				+ gMaxTimeLimit +"'>" + wpaArr[i] + "</abbr>";
		}else{
			wtCon = "<abbr title='the limit time is " + gMinTimeLimit + "-" 
			+ gMaxTimeLimit +"'>" + wpaArr[i] + "</abbr>";
		}
		$(".workdayPrefAvg .prefTd").eq(i).html(wtCon);
	}
	
	var recDemands = recArr[12];
	var spmDemands = spmArr[12];
	var spaDemands = spaArr[12];
	var wtlDemands = wtlArr[12];
	var wtsDemands = wtsArr[12];
	var wpmDemands = wpmArr[12];
	var wpaDemands = wpaArr[12];
	
	$("#recommendTb").html(loadTmpFunc(recDemands));
	$("#shiftPrefMinTb").html(loadTmpFunc(spmDemands));
	$("#shiftPrefAvgTb").html(loadTmpFunc(spaDemands));
	$("#workTimeLongTb").html(loadTmpFunc(wtlDemands));
	$("#workTimeShortTb").html(loadTmpFunc(wtsDemands));
	$("#workdayPrefMinTb").html(loadTmpFunc(wpmDemands));
	$("#workdayPrefAvgTb").html(loadTmpFunc(wpaDemands));
}


function loadTmpFunc(demand){
	var contShift = "";
	var colorShift = ['','primary','success','info','warning','danger'];
	var levelName = ["N0:Nurse","N1:Nurse Practitioner","N2:Nurse-in-charge","N3:Associate Professor of Nursing","N4:Professor of Nursing"];
	for(var sh in demand[0]){
		contShift = contShift + "<tr><td rowspan='10' style='width:15%' class=" +colorShift[strNum(demand[0][sh].name)] + "><b>" + demand[0][sh].name +"</b></td>";
		for(var idxL=0;idxL<5;idxL++){
			if(idxL!=0){
				contShift += "<tr>"
			}
			contShift = contShift + "<td class='info' colspan='9'><b>" + levelName[idxL] + "</b></td></tr>";
			contShift = contShift + "<tr><td class='warning'>Arranged</td>"
			for(var idxD=0;idxD<7;idxD++){
				var arranged = demand[idxD][sh]["lv"+(idxL+1)];
				var demanded = demand[idxD][sh]["lv"+(idxL+1)+"rec"];
				var pre="<td>";
				if(arranged < demanded){
					pre = "<td style='color:red'>";
				}else if(arranged > demanded){
					pre = "<td style='color:blue'>";
				}
				contShift = contShift + pre + arranged + "</td>";
			}
			contShift = contShift + "<td>" + demand[0][sh]["lv"+(idxL+1)+"rec"] + "</td></tr>";
		}
	}
	 
	return contShift;
}


function showHead(){
	var date = new Date();
	var day = date.getDay();
	if(day==0){
		day = 7;
	}
	date.setDate(date.getDate()-day+7);
	for(i=0;i<7;i++){
		date.setDate(date.getDate()+1);
		var str = showDay(date.getDay()) + "(" + (date.getMonth()+1) + "/" + date.getDate() +")";
		for(j=0;j<7;j++){
			$(".day").eq(i+7*j).text(str);
			$(".dayShift").eq(i+7*j).text(str);
		}
	}
}

function strNum(str){
	if(str==null || str==""){
		return 0;
	}
	var len = str.length;
	var num=0;
	for(var idx=0;idx<len;idx++){
		num = num + str.charCodeAt(idx);
	}
	return num%6;
}

function getNewRoster(which){
	var url = "/admin/getNewRoster/"+which;
	return getJson(url);
}

function getNewRosterByLevel(which,level){
	var url = "/admin/getNewRosterByLevel/"+which +"/" + level;
	return getJson(url);
}


function fillerHelper(week){
	var levelName = ["N0:Nurse","N1:Nurse Practitioner","N2:Nurse-in-charge","N3:Associate Professor of Nursing","N4:Professor of Nursing"];
	var cont = "";
	var shiftRoster =new Object();
	for(var lv=1;lv<=5;lv++){
		var ros1 = getNewRosterByLevel(week,lv);
		cont = cont + "<tr><td colspan='9' class='info'><b>"+levelName[lv-1]+"</b></td></tr>"

		for(i in ros1){
			//get shift roster
			if(shiftRoster[ros1[i].monShift] == undefined){
				shiftRoster[ros1[i].monShift] = new Array();
				for(var j=0;j<7;j++){
					shiftRoster[ros1[i].monShift][j] = new Array();
					for(var k=0;k<5;k++){
						shiftRoster[ros1[i].monShift][j][k]="";
					}
				}
				
				shiftRoster[ros1[i].monShift][0][lv-1] = "<div>"+ros1[i].nickName + "</div>";
				
			}else{
				shiftRoster[ros1[i].monShift][0][lv-1] += "<div>"+ros1[i].nickName + "</div>";
			}
			//tue
			if(shiftRoster[ros1[i].tueShift] == undefined){
				shiftRoster[ros1[i].tueShift] = new Array();
				for(var j=0;j<7;j++){
					shiftRoster[ros1[i].tueShift][j] = new Array();
					for(var k=0;k<5;k++){
						shiftRoster[ros1[i].tueShift][j][k]="";
					}
				}
				shiftRoster[ros1[i].tueShift][1][lv-1] = "<div>"+ros1[i].nickName + "</div>";
			}else{
				shiftRoster[ros1[i].tueShift][1][lv-1] += "<div>"+ros1[i].nickName + "</div>";
			}
			//wed
			if(shiftRoster[ros1[i].wedShift] == undefined){
				shiftRoster[ros1[i].wedShift] = new Array();
				for(var j=0;j<7;j++){
					shiftRoster[ros1[i].wedShift][j] = new Array();
					for(var k=0;k<5;k++){
						shiftRoster[ros1[i].wedShift][j][k]="";
					}
				}
				shiftRoster[ros1[i].wedShift][2][lv-1] = "<div>"+ros1[i].nickName + "</div>";
			}else{
				shiftRoster[ros1[i].wedShift][2][lv-1] += "<div>"+ros1[i].nickName + "</div>";
			}
			//thu
			if(shiftRoster[ros1[i].thuShift] == undefined){
				shiftRoster[ros1[i].thuShift] = new Array();
				for(var j=0;j<7;j++){
					shiftRoster[ros1[i].thuShift][j] = new Array();
					for(var k=0;k<5;k++){
						shiftRoster[ros1[i].thuShift][j][k]="";
					}
				}
				shiftRoster[ros1[i].thuShift][3][lv-1] = "<div>"+ros1[i].nickName + "</div>";
			}else{
				shiftRoster[ros1[i].thuShift][3][lv-1] += "<div>"+ros1[i].nickName + "</div>";
			}
			//fri
			if(shiftRoster[ros1[i].friShift] == undefined){
				shiftRoster[ros1[i].friShift] = new Array();
				for(var j=0;j<7;j++){
					shiftRoster[ros1[i].friShift][j] = new Array();
					for(var k=0;k<5;k++){
						shiftRoster[ros1[i].friShift][j][k]="";
					}
				}
				shiftRoster[ros1[i].friShift][4][lv-1] = "<div>"+ros1[i].nickName + "</div>";
			}else{
				shiftRoster[ros1[i].friShift][4][lv-1] += "<div>"+ros1[i].nickName + "</div>";
			}
			//sat
			if(shiftRoster[ros1[i].satShift] == undefined){
				shiftRoster[ros1[i].satShift] = new Array();
				for(var j=0;j<7;j++){
					shiftRoster[ros1[i].satShift][j] = new Array();
					for(var k=0;k<5;k++){
						shiftRoster[ros1[i].satShift][j][k]="";
					}
				}
				shiftRoster[ros1[i].satShift][5][lv-1] = "<div>"+ros1[i].nickName + "</div>";
			}else{
				shiftRoster[ros1[i].satShift][5][lv-1] += "<div>"+ros1[i].nickName + "</div>";
			}
			//sun
			if(shiftRoster[ros1[i].sunShift] == undefined){
				shiftRoster[ros1[i].sunShift] = new Array();
				for(var j=0;j<7;j++){
					shiftRoster[ros1[i].sunShift][j] = new Array();
					for(var k=0;k<5;k++){
						shiftRoster[ros1[i].sunShift][j][k]="";
					}
				}
				shiftRoster[ros1[i].sunShift][6][lv-1] = "<div>"+ros1[i].nickName + "</div>";
			}else{
				shiftRoster[ros1[i].sunShift][6][lv-1] += "<div>"+ros1[i].nickName + "</div>";
			}
			
			
			//fill roster
			cont = cont + "<tr>";
			cont = cont + "<th>" +ros1[i].nickName + "</th>";
			for (j in ros1[i]){
				var preStr ="";
				var gUserId;
				if(j=="monId" || j=="tueId" || j=="wedId" || j=="thuId"
					|| j=="friId" || j=="satId" || j=="sunId"){
					if(j=="monId"){cont = cont + "<td>"}
					preStr = "<input type='text' class='hide' name='" 
						+ j + "' value='" +ros1[i][j] + "' ";

					cont = cont + preStr + ">";
					if(j=="sunId"){
						cont = cont + "<input type='text' class='hide' name='userId'value='"
						+ gUserId + "'></td>";}
				}else if(j=="userId"){
					gUserId = ros1[i][j];
				}else if(j=="userName"){
				//	preStr = "<td><input type='button' class='btn' name='" + j + "' value='" +ros1[i].nickName + "' ";
				//	cont = cont + preStr + "></td>";
				}else if(j=="nickName"){
				}else if(j=="totalTime"){
					var total = ros1[i][j];
					if(total > gMaxTimeLimit || total < gMinTimeLimit){
						cont = cont + "<td style='color:red'>" + total + "</td>";
					}else{
						cont = cont + "<td>" + total + "</td>";
					}
					
				}else{
					preStr = "<td><input type='button' class='btn " + color[strNum(ros1[i][j])] + "' name='" + j + "' value='" +ros1[i][j] 
					+ "' onclick='modalBtn=$(this)' ";
					cont = cont + preStr + "></td>";
				}
			}
			cont = cont + "</tr>";
			
		}
	}
	return cont;
}


function fillRoster(){
	
	$("#recTbody").html(fillerHelper("recommend"));
	$("#spmTbody").html(fillerHelper("shiftPrefMin"));
	$("#spaTbody").html(fillerHelper("shiftPrefAvg"));
	$("#wtlTbody").html(fillerHelper("workTimeLong"));
	$("#wtsTbody").html(fillerHelper("workTimeShort"));
	$("#wpmTbody").html(fillerHelper("workdayPrefMin"));
	$("#wpaTbody").html(fillerHelper("workdayPrefAvg"));
	
	$(".hide").hide();
}

function setModal(){
	var res= getJson("/admin/loadShiftType");
	var cont = "";
	for(i in res){
		cont = cont + "<button class='btn btn-block " + "" + color[strNum(res[i].name)]
			+ "' onclick=\" changeShift('" + res[i].id + "','" + res[i].name + "','"
			+ color[strNum(res[i].name)] + "') \">" + res[i].name + "</button>";
	}
	$(".modal-body").html(cont);
}

function changeShift(id,name,color){
	var tr = modalBtn.parent().parent();
	var raw = modalBtn.attr("name");
	if(raw.indexOf("mon")>-1){
		tr.find(".hide").eq(0).attr("value",id);
	}else if(raw.indexOf("tue")>-1){
		tr.find(".hide").eq(1).attr("value",id);
	}else if(raw.indexOf("wed")>-1){
		tr.find(".hide").eq(2).attr("value",id);
	}else if(raw.indexOf("thu")>-1){
		tr.find(".hide").eq(3).attr("value",id);
	}else if(raw.indexOf("fri")>-1){
		tr.find(".hide").eq(4).attr("value",id);
	}else if(raw.indexOf("sat")>-1){
		tr.find(".hide").eq(5).attr("value",id);
	}else if(raw.indexOf("sun")>-1){
		tr.find(".hide").eq(6).attr("value",id);
	}
	modalBtn.attr("value",name);
	modalBtn.attr("class","btn " + color);
	sendJson("/admin/updateNewRosterById/" + which ,jsonify(tr));
	window.location.href="roster.html";
}

function choose(whichRos){
	window.location.href="/admin/chooseRoster/" + whichRos;
}

function init(){
	loadTimeLimit();
	recommend();
	generateRosters();
	loadNewRosterReport();
	showHead();
	fillRoster();
	setModal();
}

</script>
</head>
<body>
<a id="top"></a>
 <nav class="navbar navbar-default" role="navigation">
 	<div class="container-fluid">
 	<div class="navbar-header">
        <a class="navbar-brand" href="/admin/notice.html">NurseHub</a>
    </div>
    <div>
        <ul class="nav navbar-nav">
            <li><a href="notice.html">Notice</a></li>
            <li><a href="strategy.html">Strategy</a></li>
            <li class="active"><a href="roster.html">Roster</a></li>
            <li><a href="approval.html">Approval</a></li>
            <li><a href="staff.html">Staff</a></li>
        </ul>
    </div>
    <div style="text-align:right">
    	<p id="welcome"></p>
    	<a href="/login/quit">quit</a>
    </div>
	</div>
 </nav>
 
 <div class="row">
	<div class="col-xs-2 col-md-1">
		<ul class="nav nav-pills nav-stacked"  data-toggle="buttons">
			<li><a href="#" onclick="recommend()">Recommend Most</a></li>
			<li><a href="#" onclick="shiftPrefMin()">Min ShiftPref First</a></li>
			<li><a href="#" onclick="shiftPrefAvg()">Avg ShiftPref First</a></li>
			<li><a href="#" onclick="workTimeLong()">Long WorkTime First</a></li>
			<li><a href="#" onclick="workTimeShort()">Short WorkTime First</a></li>
			<li><a href="#" onclick="workdayPrefMin()">Min WorkdayPref First</a></li>
			<li><a href="#" onclick="workdayPrefAvg()">Avg WorkdayPref First</a></li>
			<li><a href="#" onclick="window.location.href='roster.html'">Return</a></li>
		</ul>
	</div>
	
	<!--  recommend -->
	<div class="col-xs-10 col-md-11">
	<div id="recommend" class="recommend">
		<div class="panel panel-primary">
		    
		    <div class="panel-heading">
		        <h3 class="panel-title">
		        	<a data-toggle="collapse" data-parent="#accordion" href="#collapse1">Recommend Most Report</a>
               	</h3>
		    </div>
		    <div id="collapse1" class="panel-body panel-collapse collapse in">
		    	<table class="table">
				  <caption>
				  	<div><b>Meet Time Limit:<span class="timeLimitOk"></span></b></div>
				  	<div><b>Meet Shift Demand:<span class="demandOk"></span></b></div>
				  	<div><b>Comprehensive Score:</b>
				  		<input type='hidden' class='rating compScore' data-readonly data-fractions='2'/>
				  	</div>
				  	<div><button class="btn btn-success" onclick="choose('recommend')">USE THIS ROSTER</button></div>
				  </caption>
				  <thead>
				    <tr>
				      <th></th>
				      <th>Min</th>
				      <th>Avg</th>
				      <th>Max</th>
				    </tr>
				  </thead>
				  <tbody >
				    <tr class="success">
				      <td>ShiftPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="warning">
				      <td>WorkdayPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="danger">
				      <td>WorkTime(h)</td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				    </tr>
				</tbody>
				</table>
				
				<table class="table table-striped">
				  <thead>
				  <tr>
				  	<th>Shift</th>
				  	<th></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				  	<th>Demand</th>
				  </tr>
				  </thead>
				  <tbody id="recommendTb" ></tbody>
				</table>
		    </div>
		</div>
		
		<div class="panel panel-success">
		    <div class="panel-heading">
		        <h3 class="panel-title">Recommend Most Roster</h3>
		    </div>
		    <div class="panel-body">
		    	<table id="tbThisWeek" class="table table-striped">
				  <thead>
				    <tr>
				      <th>UserName</th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th>Hours</th>
				    </tr>
				  </thead>
				  <tbody id="recTbody"></tbody>
				</table>
		    </div>
		</div>
	</div>
	
	
	<!-- shiftPrefMin -->
	
	<div id="shiftPrefMin" class="shiftPrefMin">
		<div class="panel panel-info">
		    <div class="panel-heading">
		        <h3 class="panel-title">
		       		<a data-toggle="collapse" data-parent="#accordion" href="#collapse2">Min ShiftPre First Report</a>
		       	</h3>
		    </div>
		    <div id="collapse2" class="panel-body panel-collapse collapse in">
		    	
		    	<table class="table">
				  <caption>
				  	<div><b>Meet Time Limit:<span class="timeLimitOk"></span></b></div>
				  	<div><b>Meet Shift Demand:<span class="demandOk"></span></b></div>
				  	<div><b>Comprehensive Score:</b>
				  		<input type='hidden' class='rating compScore' data-readonly data-fractions='2'/>
				  	</div>
				  	<div><button class="btn btn-success" onclick="choose('shiftPrefMin')">USE THIS ROSTER</button></div>
				  </caption>
				  <thead>
				    <tr>
				      <th></th>
				      <th>Min</th>
				      <th>Avg</th>
				      <th>Max</th>
				    </tr>
				  </thead>
				  <tbody >
				    <tr class="success">
				      <td>ShiftPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="warning">
				      <td>WorkdayPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="danger">
				      <td>WorkTime(h)</td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				    </tr>
				</tbody>
				</table>
				
				<table class="table table-striped">
				  <thead>
				  <tr>
				  	<th>Shift</th>
				  	<th></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				  	<th>Demand</th>
				  </tr>
				  </thead>
				  <tbody id="shiftPrefMinTb" ></tbody>
				</table>
		    </div>
		</div>
		
		<div class="panel panel-warning" >
			
		    <div class="panel-heading">
		        <h3 class="panel-title">Min ShiftPre First Roster</h3>
		    </div>
		    <div class="panel-body">
		    	<table id="tbNextWeek"  class="table table-striped">
				  <thead>
				    <tr>
				      <th>UserName</th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th>Hours</th>
				    </tr>
				  </thead>
				  <tbody id="spmTbody"> </tbody>
				</table>
		    </div>
		</div>
		
		
	</div>
		
		
	<!-- shiftPrefAvg -->
	
	<div id="shiftPrefAvg" class="shiftPrefAvg">
		<div class="panel panel-success">
		    <div class="panel-heading">
		        <h3 class="panel-title">
		        	<a data-toggle="collapse" data-parent="#accordion" href="#collapse3">Avg ShiftPref First Report</a>
		        </h3>
		    </div>
		    <div id="collapse3" class="panel-body panel-collapse collapse in">
		    	
		    	<table class="table">
				  <caption>
				  	<div><b>Meet Time Limit:<span class="timeLimitOk"></span></b></div>
				  	<div><b>Meet Shift Demand:<span class="demandOk"></span></b></div>
				  	<div><b>Comprehensive Score:</b>
				  		<input type='hidden' class='rating compScore' data-readonly data-fractions='2'/>
				  	</div>
				  	<div><button class="btn btn-success" onclick="choose('shiftPrefAvg')">USE THIS ROSTER</button></div>
				  </caption>
				  <thead>
				    <tr>
				      <th></th>
				      <th>Min</th>
				      <th>Avg</th>
				      <th>Max</th>
				    </tr>
				  </thead>
				  <tbody >
				    <tr class="success">
				      <td>ShiftPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="warning">
				      <td>WorkdayPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="danger">
				      <td>WorkTime(h)</td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				    </tr>
				</tbody>
				</table>
				
				 <table class="table table-striped">
				  <thead>
				  <tr>
				  	<th>Shift</th>
				  	<th></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				  	<th>Demand</th>
				  </tr>
				  </thead>
				  <tbody id="shiftPrefAvgTb" ></tbody>
				</table>
		    </div>
		</div>
		
		<div class="panel panel-danger" >
			
		    <div class="panel-heading">
		        <h3 class="panel-title">Avg ShiftPref First Roster</h3>
		    </div>
		    <div class="panel-body">
		    	<table id="tbNextWeek"  class="table table-striped">
				  <thead>
				    <tr>
				      <th>UserName</th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th>Hours</th>
				    </tr>
				  </thead>
				  <tbody id="spaTbody"> </tbody>
				</table>
		    </div>
		</div>
		
		
	</div>
		
		<!-- workTimeLong -->
	
	<div id="workTimeLong" class="workTimeLong">
		<div class="panel panel-warning">
		    <div class="panel-heading">
		        <h3 class="panel-title">
		        	<a data-toggle="collapse" data-parent="#accordion" href="#collapse4">Long WorkTime First Report</a>
		        </h3>
		    </div>
		    <div id="collapse4" class="panel-body panel-collapse collapse in">
		    	
		    	<table class="table">
				  <caption>
				  	<div><b>Meet Time Limit:<span class="timeLimitOk"></span></b></div>
				  	<div><b>Meet Shift Demand:<span class="demandOk"></span></b></div>
				  	<div><b>Comprehensive Score:</b>
				  		<input type='hidden' class='rating compScore' data-readonly data-fractions='2'/>
				  	</div>
				  	<div><button class="btn btn-success" onclick="choose('workTimeLong')">USE THIS ROSTER</button></div>
				  </caption>
				  <thead>
				    <tr>
				      <th></th>
				      <th>Min</th>
				      <th>Avg</th>
				      <th>Max</th>
				    </tr>
				  </thead>
				  <tbody >
				    <tr class="success">
				      <td>ShiftPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="warning">
				      <td>WorkdayPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="danger">
				      <td>WorkTime(h)</td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				    </tr>
				</tbody>
				</table>
				
				<table class="table table-striped">
				  <thead>
				  <tr>
				  	<th>Shift</th>
				  	<th></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				  	<th>Demand</th>
				  </tr>
				  </thead>
				  <tbody id="workTimeLongTb" ></tbody>
				</table>
		    </div>
		</div>
		
		<div class="panel panel-primary" >
			
		    <div class="panel-heading">
		        <h3 class="panel-title">Long WorkTime First Roster</h3>
		    </div>
		    <div class="panel-body">
		    	<table id="tbNextWeek"  class="table table-striped">
				  <thead>
				    <tr>
				      <th>UserName</th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th>Hours</th>
				    </tr>
				  </thead>
				  <tbody id="wtlTbody"> </tbody>
				</table>
		    </div>
		</div>
	</div>
		
	<!-- workTimeShort -->
	
	<div id="workTimeShort" class="workTimeShort">
		<div class="panel panel-danger">
		    <div class="panel-heading">
		        <h3 class="panel-title">
		        	<a data-toggle="collapse" data-parent="#accordion" href="#collapse5">Short WorkTime First Report</a>
		        </h3>
		    </div>
		    <div id="collapse5" class="panel-body panel-collapse collapse in">
		    	
		    	<table class="table">
				  <caption>
				  	<div><b>Meet Time Limit:<span class="timeLimitOk"></span></b></div>
				  	<div><b>Meet Shift Demand:<span class="demandOk"></span></b></div>
				  	<div><b>Comprehensive Score:</b>
				  		<input type='hidden' class='rating compScore' data-readonly data-fractions='2'/>
				  	</div>
				  	<div><button class="btn btn-success" onclick="choose('workTimeShort')">USE THIS ROSTER</button></div>
				  </caption>
				  <thead>
				    <tr>
				      <th></th>
				      <th>Min</th>
				      <th>Avg</th>
				      <th>Max</th>
				    </tr>
				  </thead>
				  <tbody >
				    <tr class="success">
				      <td>ShiftPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="warning">
				      <td>WorkdayPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="danger">
				      <td>WorkTime(h)</td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				    </tr>
				</tbody>
				</table>
				
				<table class="table table-striped">
				  <thead>
				  <tr>
				  	<th>Shift</th>
				  	<th></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				  	<th>Demand</th>
				  </tr>
				  </thead>
				  <tbody id="workTimeShortTb" ></tbody>
				</table>
		    </div>
		</div>
		
		<div class="panel panel-info" >
			
		    <div class="panel-heading">
		        <h3 class="panel-title">Short WorkTime First Roster</h3>
		    </div>
		    <div class="panel-body">
		    	<table id="tbNextWeek"  class="table table-striped">
				  <thead>
				    <tr>
				      <th>UserName</th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th>Hours</th>
				    </tr>
				  </thead>
				  <tbody id="wtsTbody"> </tbody>
				</table>
		    </div>
		</div>
	</div>
	
	
	<!-- workdayPrefMin -->
	
	<div id="workdayPrefMin" class="workdayPrefMin">
		<div class="panel panel-primary">
		    <div class="panel-heading">
		        <h3 class="panel-title">
		        	<a data-toggle="collapse" data-parent="#accordion" href="#collapse6">Min WorkdayPref First Report</a>
		        </h3>
		    </div>
		    <div id="collapse6" class="panel-body panel-collapse collapse in">
		    	
		    	<table class="table">
				  <caption>
				  	<div><b>Meet Time Limit:<span class="timeLimitOk"></span></b></div>
				  	<div><b>Meet Shift Demand:<span class="demandOk"></span></b></div>
				  	<div><b>Comprehensive Score:</b>
				  		<input type='hidden' class='rating compScore' data-readonly data-fractions='2'/>
				  	</div>
				  	<div><button class="btn btn-success" onclick="choose('workdayPrefMin')">USE THIS ROSTER</button></div>
				  </caption>
				  <thead>
				    <tr>
				      <th></th>
				      <th>Min</th>
				      <th>Avg</th>
				      <th>Max</th>
				    </tr>
				  </thead>
				  <tbody >
				    <tr class="success">
				      <td>ShiftPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="warning">
				      <td>WorkdayPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="danger">
				      <td>WorkTime(h)</td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				    </tr>
				</tbody>
				</table>
				
				<table class="table table-striped">
				  <thead>
				  <tr>
				  	<th>Shift</th>
				  	<th></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				  	<th>Demand</th>
				  </tr>
				  </thead>
				  <tbody id="workdayPrefMinTb" ></tbody>
				</table>
		    </div>
		</div>
		
		<div class="panel panel-success" >
			
		    <div class="panel-heading">
		        <h3 class="panel-title">Min WorkdayPref First Roster</h3>
		    </div>
		    <div class="panel-body">
		    	<table id="tbNextWeek"  class="table table-striped">
				  <thead>
				    <tr>
				      <th>UserName</th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th>Hours</th>
				    </tr>
				  </thead>
				  <tbody id="wpmTbody"> </tbody>
				</table>
		    </div>
		</div>
	</div>
	
	
	<!-- workdayPrefAvg -->
	
	<div id="workdayPrefAvg" class="workdayPrefAvg">
		<div class="panel panel-info">
		    <div class="panel-heading">
		        <h3 class="panel-title">
		        	<a data-toggle="collapse" data-parent="#accordion" href="#collapse7">Avg WorkdayPref First Report</a>
		        </h3>
		    </div>
		    <div id="collapse7" class="panel-body panel-collapse collapse in">
		    	
		    	<table class="table">
				  <caption>
				  	<div><b>Meet Time Limit:<span class="timeLimitOk"></span></b></div>
				  	<div><b>Meet Shift Demand:<span class="demandOk"></span></b></div>
				  	<div><b>Comprehensive Score:</b>
				  		<input type='hidden' class='rating compScore' data-readonly data-fractions='2'/>
				  	</div>
				  	<div><button class="btn btn-success" onclick="choose('workdayPrefAvg')">USE THIS ROSTER</button></div>
				  </caption>
				  <thead>
				    <tr>
				      <th></th>
				      <th>Min</th>
				      <th>Avg</th>
				      <th>Max</th>
				    </tr>
				  </thead>
				  <tbody >
				    <tr class="success">
				      <td>ShiftPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="warning">
				      <td>WorkdayPref</td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				      <td><input type='hidden' class='rating prefTd' data-readonly data-fractions='2'/></td>
				    </tr>
				    <tr class="danger">
				      <td>WorkTime(h)</td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				      <td class="prefTd"></td>
				    </tr>
				</tbody>
				</table>
				
				<table class="table table-striped">
				  <thead>
				  <tr>
				  	<th>Shift</th>
				  	<th></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				    <th class="dayShift"></th>
				  	<th>Demand</th>
				  </tr>
				  </thead>
				  <tbody id="workdayPrefAvgTb" ></tbody>
				</table>
		    </div>
		</div>
		
		<div class="panel panel-warning" >
			
		    <div class="panel-heading">
		        <h3 class="panel-title">Avg WorkdayPref First Roster</h3>
		    </div>
		    <div class="panel-body">
		    	<table id="tbNextWeek"  class="table table-striped">
				  <thead>
				    <tr>
				      <th>UserName</th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th class="day"></th>
				      <th>Hours</th>
				    </tr>
				  </thead>
				  <tbody id="wpaTbody"> </tbody>
				</table>
		    </div>
		</div>
	</div>
	
	

	<!-- end -->	
	
	</div>
	
	<!-- Modal -->
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	    <div class="modal-dialog">
	        <div class="modal-content">
	            <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	            </div>
	            <div class="modal-body"></div>
	        </div><!-- /.modal-content -->
	    </div><!-- /.modal -->
	</div>
</div>
<div style="text-align:right"><button class="btn btn-primary" onclick="window.location.hash='#top'">TOP</button></div>

<script>
init();
$("#welcome").text("welcome " + checkLogin() );
</script>
			
</body>
</html>